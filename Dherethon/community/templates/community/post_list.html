<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    {% block content %}
  <h2>ğŸ¡ ì»¤ë®¤ë‹ˆí‹°</h2>

        <nav>
            <p><a href="{% url 'home:main' %}">í™ˆ</a></p>
            <p><a href="{% url 'challenges:my_challenges' %}">ë‚˜ì˜ ë„ì „</a></p>
            <p><a href="{% url 'community:post_list' %}">ì»¤ë®¤ë‹ˆí‹°</a></p>
            <p><a href="{% url 'home:badge_list' %}">ë±ƒì§€</a></p>
        </nav>
        
  <a href="{% url 'community:create_post' %}">â• ì¸ì¦ ê¸€ ì‘ì„±í•˜ê¸°</a>
  <hr>
            <!-- ê²€ìƒ‰ì°½ -->
    <form method="get" action="{% url 'community:post_list' %}">
      <input type="text" name="q" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" value="{{ query }}">
      <button type="submit">ê²€ìƒ‰</button>
    </form>

    <!-- ğŸ”½ ì¹´í…Œê³ ë¦¬ í•„í„° nav -->
    <div style="margin: 10px 0;">
      <a href="?category=ì „ì²´{% if query %}&q={{ query }}{% endif %}"
        {% if selected_category == 'ì „ì²´' %}style="font-weight:bold;"{% endif %}>
        ì „ì²´
      </a>
      {% for cat in categories %}
        |
        <a href="?category={{ cat.name }}{% if query %}&q={{ query }}{% endif %}"
          {% if selected_category == cat.name %}style="font-weight:bold;"{% endif %}>
          {{ cat.name }}
        </a>
      {% endfor %}
    </div>

  <hr>

  {% for post in posts %}
    <div style="border:1px solid #ccc; padding:10px; margin-bottom:10px;">
      <p><strong>{{ post.user.nickname }}</strong>ë‹˜ì˜ ì¸ì¦ê¸€</p>
      <p>{{ post.content|truncatechars:100 }}</p>
      <p><strong>ë„ì „:</strong> {{ post.goal.challenge.title }}</p>
      <p>â¤ï¸ {{ post.like_count }} / ğŸ’¬ {{ post.comments.count }}</p>
      <a href="{% url 'community:post_detail' post.id %}">[ìì„¸íˆ ë³´ê¸°]</a>
    </div>
  {% empty %}
    <p>ì•„ì§ ë“±ë¡ëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
  {% endfor %}
{% endblock %}
</body>
</html>

