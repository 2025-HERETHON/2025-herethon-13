{% load static %}
{% block content %}

<div>

    <!-- 왼쪽 사이드바 -->
    <div>
        <!-- 프로필 -->
        {% if user.profile_image and user.profile_image.url %}
            <img src="{{ user.profile_image.url }}" alt="프로필 이미지">
        {% else %}
            <img src="{% if user.profile_image %}{{ user.profile_image.url }}{% else %}{% static 'images/default_profile.png' %}{% endif %}" alt="프로필 이미지">
        {% endif %}

        <p>{{ request.user.nickname }}</p>

        <!-- 메뉴 -->
        <nav>
            <p><a href="{% url 'home:main' %}">홈</a></p>
            <p><a href="{% url 'challenges:my_challenges' %}">나의 도전</a></p>
            <p><a href="{% url 'community:post_list' %}">커뮤니티</a></p>
            <p><a href="{% url 'home:badge_list' %}">뱃지</a></p>
        </nav>

        <!-- 로그아웃 -->
        <p><a href="{% url 'api:logout' %}">로그아웃</a></p>
    </div>

    <!-- 오른쪽 메인 콘텐츠 -->
    <div>

        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <h3>어떤 걸 도전하시나요?</h3>
            {{ form.title }}

            <h3>카테고리 선택</h3>
            {{ form.category }}

            <h3>대표 이미지</h3>
            {{ form.image }}

            <h3>목표 기간</h3>
            {{ form.start_date }} ~ {{ form.end_date }}

            <h3>공개 여부</h3>
            {{ form.is_public }}

            <h3>인증 주기</h3>
            {{ form.frequency }}

            <h3>세부 목표</h3>
            <div id="goal-container">
                {% if challenge %}
                    {% for goal in goals %}
                        <div class="goal-input-wrapper">
                            <input type="text" name="goal_{{ goal.id }}" value="{{ goal.content }}" class="goal-input">
                        </div>
                    {% endfor %}
                    <p style="font-size: 13px; color: gray;">※ 기존 목표 수정이 가능합니다. 아래 입력창으로 새 목표도 추가할 수 있습니다.</p>
                {% endif %}
                
                <!-- 새로운 세부 목표 입력란 -->
                <div class="goal-input-wrapper">
                    <input type="text" name="goals" placeholder="세부 목표를 입력해주세요." class="goal-input">
                </div>
            </div>
            <button type="button" id="add-goal-btn">➕ 목표 추가</button>

            <br><br>
            <button type="submit">
                {% if challenge %}수정하기{% else %}등록하기{% endif %}
            </button>
        </form>

        <script src="{% static 'js/create.js' %}"></script>

    </div>

</div>

{% endblock %}
